{
  "hash": "ef108fcc6efa03e65801796322bebf14",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Ejercicio de bases de datos\"\nauthor: \n  - name: \"María Suárez Muñoz\"\n    orcid: 0000-0003-1765-6885\n    email: bv2sumum@uco.es\n    affiliation: Departamento de Ingeniería Forestal, Universidad de Córdoba\ndate: 2025-02-03\nsesion: 2\nformat: \n  revealjs:\n    auto-stretch: false \n    logo: \"images/logo-ugr.png\"\n    footer: Master Universitario en Conservación, Gestión y Restauración de la Biodiversidad\n    theme: [default, \"../../custom_theme.scss\"] \n    transition: fade\n    background-transition: fade\n    highlight-style: a11y\ncode-link: true\ncrossref:\n  fig-title: Figura     # (default is \"Figure\")\n  tbl-title: Tabla     # (default is \"Table\")\n  title-delim: .     # (default is \":\")\n  fig-prefix: Figura\n  tbl-prefix: Tabla\n  ref-hyperlink: true\n  sec-prefix: \"\"\n  sec-labels: alpha\n---\n\n\n\n# Introducción {.unnumbered}\n\n- En este ejercicio aprenderemos a trabajar con bases de datos desde `R`.\n\n- Vamos a trabajar con [R](https://www.r-project.org/), Rstudio (ahora llamado [posit](https://posit.co/)), y utilizaremos al menos los paquete [`RSQLite`](https://rsqlite.r-dbi.org/) y [`dplyr`](https://dplyr.tidyverse.org/).\n\n# Flujo de Trabajo\n\n1. Instalar y cargar paquetes\n2. Crear conexión con base de datos\n3. Montar base de datos\n4. Realizar consultas\n5. Cerrar base de datos\n\n## Instalar y cargar paquetes\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'RSQLite' was built under R version 4.4.1\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'dplyr'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n\n\n:::\n:::\n\n\n\n## Crear conexión con base de datos\n\n\n::: {.cell}\n\n:::\n\n\n\n## Montar base de datos\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# path <- \"/Users/maria.suarez.munoz/Library/CloudStorage/GoogleDrive-msuamun@go.ugr.es/My Drive/Docencia/Ecoinformatica_UGR/ecoinformatica_web/sesiones/bbdd/\"\n# parcelas <- read.table(paste0(path, \"material/ifn3p18_Convertida_Tabla_PCParcelas.txt\"), sep = \";\", header = TRUE)\n# mayores <- read.table(paste0(path, \"material/ifn3p18_Convertida_Tabla_PCMayores.txt\"), sep = \";\", header = TRUE)\n# matorral <- read.table(paste0(path, \"material/ifn3p18_Convertida_Tabla_PCMatorral.txt\"), sep = \";\", header = TRUE)\n# regenera <- read.table(paste0(path, \"material/ifn3p18_Convertida_Tabla_PCRegenera.txt\"), sep = \";\", header = TRUE)\n#  \n# dbWriteTable(con, \"parcelas\", parcelas)\n# dbWriteTable(con, \"mayores\", mayores)\n# dbWriteTable(con, \"matorral\", matorral)\n# dbWriteTable(con, \"regenera\", regenera)\n#  \n# dbListTables(con)\n# dbListFields(con, \"parcelas\")\n# dbReadTable(con, \"parcelas\")\n```\n:::\n\n\n\n## Realizar consultas\n\nConsultas sencillas con SQL\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# query_1 <- dbSendQuery(con, \"SELECT * FROM mayores WHERE Dn1 = 84\")\n# df_q1 <- dbFetch(query_1)\n# dbClearResult(df_q1)\n```\n:::\n\n\n\nConsultas más complejas: por ejemplo, quiero conocer cuáles son las especies acompañantes a las encinas adultas en cada parcela\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# query_2 <- dbSendQuery(con, \"...\")\n```\n:::\n\n\n\n# Consultas más complejas sin usar lenguaje SQL\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# fulljoin <- parcelas %>%\n#   dplyr::select(Estadillo, Cla, Subclase, CoorX, Coory, FccArb, FccTot) %>%\n#   full_join(tabla2,\n#             by = c(\"Estadillo\" = \"Estadillo\", \"Cla\" = \"Cla\", \"Subclase\" = \"Subclase\"))\n# \n# leftjoin <- parcelas %>%\n#   dplyr::select(Estadillo, Cla, Subclase, CoorX, Coory, FccArb, FccTot) %>%\n#   left_join(tabla2,\n#             by = c(\"Estadillo\" = \"Estadillo\", \"Cla\" = \"Cla\", \"Subclase\" = \"Subclase\"))\n# \n# rightjoin <- parcelas %>%\n#   dplyr::select(Estadillo, Cla, Subclase, CoorX, Coory, FccArb, FccTot) %>%\n#   right_join(tabla2,\n#             by = c(\"Estadillo\" = \"Estadillo\", \"Cla\" = \"Cla\", \"Subclase\" = \"Subclase\"))\n```\n:::\n\n\n\n## Cerrar base de datos\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# dbDisconnect(con)\n```\n:::\n",
    "supporting": [
      "bbdd_ejercicio_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}